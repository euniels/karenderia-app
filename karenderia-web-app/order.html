<!DOCTYPE html>
<html class="light" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Karenderia - Order Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
</head>
<body class="bg-[#fcf8fa] font-display text-[#1b0d14]">
    <div class="max-w-[900px] mx-auto px-6 py-12 text-center">
        <header class="mb-12"><h2 class="text-[#ef3994] text-xl font-bold tracking-tight">Karenderia</h2></header>
        
        <main class="mb-12">
            <h3 class="text-[#9a4c73] text-sm font-bold uppercase tracking-widest mb-8">Menu Items</h3>
            <div id="dynamic-menu-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6"></div>
        </main>

        <div class="border-t border-gray-200 pt-12 flex flex-col items-center gap-8">
            <div class="text-center">
                <p class="text-[#9a4c73] text-sm font-semibold mb-2">Total Items: <span id="item-count">0</span></p>
                <p id="running-total" class="text-7xl font-black tracking-tight">‚Ç±0.00</p>
            </div>
            <div class="flex flex-col w-full max-w-sm gap-4">
                <button onclick="completeOrder()" class="w-full bg-[#ef3994] text-white py-4 text-lg font-bold rounded-lg hover:opacity-90 transition-opacity">Complete Order</button>
                <button onclick="clearDraft()" class="w-full text-[#9a4c73] text-sm font-medium hover:text-[#ef3994]">Clear Draft</button>
            </div>
            <footer class="mt-12 flex gap-8">
                <a class="text-[10px] font-bold text-gray-300" href="menu.html">MENU</a>
                <a class="text-[10px] font-bold text-[#ef3994]" href="#">ORDERS</a>
                <a class="text-[10px] font-bold text-gray-300" href="sales.html">SALES</a>
            </footer>
        </div>
    </div>
    <script>const DB_KEY = 'karenderia_master_menu';
        let trayTotal = 0, trayCount = 0;

        function loadMenu() {
            const grid = document.getElementById('dynamic-menu-grid');
            const menu = JSON.parse(localStorage.getItem(DB_KEY)) || [];
            grid.innerHTML = menu.map(item => `
                <div onclick="addItem(${item.price})" class="flex flex-col gap-3 group cursor-pointer">
                    <div class="w-full aspect-square rounded-2xl bg-white border-2 border-transparent group-hover:border-[#ef3994] transition-all flex items-center justify-center text-3xl shadow-sm">üç≤</div>
                    <div><p class="font-bold">${item.name}</p><p class="text-[#9a4c73] text-sm font-semibold">‚Ç±${parseFloat(item.price).toFixed(2)}</p></div>
                </div>
            `).join('');
        }

        function addItem(price) { trayTotal += parseFloat(price); trayCount++; updateUI(); }
        function updateUI() { document.getElementById('running-total').innerText = `‚Ç±${trayTotal.toFixed(2)}`; document.getElementById('item-count').innerText = trayCount; }
        
        function completeOrder() {
            if (trayCount === 0) return alert("Select an item!");
            localStorage.setItem('karenderia_sales_total', (parseFloat(localStorage.getItem('karenderia_sales_total')) || 0) + trayTotal);
            localStorage.setItem('karenderia_order_count', (parseInt(localStorage.getItem('karenderia_order_count')) || 0) + 1);
            alert("Order Complete!"); clearDraft();
        }
        function clearDraft() { trayTotal = 0; trayCount = 0; updateUI(); }
        window.onload = loadMenu;</script>

</body>
</html>